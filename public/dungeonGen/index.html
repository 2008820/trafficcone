<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Dungeon generator</title>
	<style>
		table {border-collapse: collapse; text-align: center; vertical-align: middle;}
		td {font-size: 8px; line-height: 10px; padding: 0; margin: 0;}
		td div {width: 16px; height: 13px; overflow: hidden; padding-top:3px;}
		td.door			{background-color:#acf;}
		td.space		{background-color:#eee;}
		td.stair		{background-color:#f70; color:#fff;}
		td.empty		{background-color:#000; color:#aaa;}
	</style>
	<script src="dungeon.js"></script>
	<script>
	function generate() {
		var grid = new dungeon({
			room_layout:		document.getElementById('room_layout').value,
			n_rows:				31,
			n_cols:				31,
			room_min:			3,
			room_max:			9,
			corridor_layout:	'Bent',
			remove_deadends:	50, // percent
			add_stairs:			2,
			map_style:			'Standard'
		}).getGrid();

		var tableHTML = "";
		for (r in grid) {
			var row = grid[r];

			var tableRow = "";
			for (c in row) {
				var cell = row[c];

				var class = "";
				if		(cell < 1)	class = "empty";
				else if	(cell < 10) class = "space";
				else if	(cell < 20)	class = "door";
				else if (cell < 30)	class = "stair";

				var title = {
					0:	"nothing",
					1:	"space",

					10:	"archway",
					11:	"door",
					12:	"locked door",
					13:	"trapped door",
					14:	"secret door",
					15:	"porticullis",

					21:	"stair down",
					22:	"stair up"

				}[cell];

				tableRow += "<td class=\""+class+"\" title=\""+title+"\"><div>"+cell+"</div></td>";
			}
			tableHTML += "<tr>"+tableRow+"</tr>";
		}
		document.getElementById('dungeon').innerHTML = tableHTML;
	}
	</script>
</head>

<body onload="generate()">
	<select id="room_layout"><option value="Scattered">Scattered</option><option value="Packed">Packed</option></select>
	<input type="button" onclick="generate()" value="regenerate!">
	<table id="dungeon">
	</table>
</body>
</html>
