<!DOCTYPE html>
<html lang="en">
<head>
    <title></title>
    
    <script type="text/javascript" src="..\tccore\jquery.min.js"></script>

 <script type="text/javascript">

	var cellWidth = 30;
	var cellHeight = 30;
	function getCellBoundaries(theCellX, theCellY) {
		var aOffset = { "offsetX": (cellWidth * -1) / 2, "offsetY": (cellHeight * -1) / 2 };
		var aCell = { "x": theCellX, "y": theCellY };
		var p1 = getScreenCoords(aCell, aOffset);

		aOffset = { "offsetX": (cellWidth) / 2, "offsetY": (cellHeight * -1) / 2 };
		var p2 = getScreenCoords(aCell, aOffset);

		aOffset = { "offsetX": (cellWidth) / 2, "offsetY": (cellHeight) / 2 };
		var p3 = getScreenCoords(aCell, aOffset);

		aOffset = { "offsetX": (cellWidth * -1) / 2, "offsetY": (cellHeight) / 2 };
		var p4 = getScreenCoords(aCell, aOffset);

		return { "point1": p1, "point2": p2, "point3": p3, "point4": p4 };
	}
	function getScreenCoords(Cell, offset) {
		var posX = Cell.x * cellWidth + offset.offsetX;
		var posZ = Cell.y * cellHeight - offset.offsetY;
		var xCart = (posX - posZ)
		var yCart = (posX + posZ) / 2;
		var rX = -xCart + 0;
		var rY = +yCart + 0;
		return { "x": Math.floor(rX), "y": Math.floor(rY) };

		
	}
	
	function draw(context, cellX, cellY, fill) {

        var cellPoints = getCellBoundaries(cellX, cellY);
        context.beginPath();
        context.strokeStyle = "gray";
        context.moveTo(cellPoints.point1.x, cellPoints.point1.y);
        context.lineTo(cellPoints.point2.x, cellPoints.point2.y);
		/*
        context.lineTo(cellPoints.point3.x, cellPoints.point3.y);
        context.lineTo(cellPoints.point4.x, cellPoints.point4.y);
        context.lineTo(cellPoints.point1.x, cellPoints.point1.y);
		*/
        if (fill) {
            context.fill();
        }
        else {
            context.stroke();
        }
        context.closePath();

    }
	
	$(document).ready(function () {

		/*let's saw we want to draw an isometric square in the center of the page. 
	    Before we do that though, let;s draw a normal square in the center of the page 
		so you know where some of these wild assumptions come from. To do that, we need to know 
		where the square should go. We know our canvas is 800 wide and our cells are 30 wide so
		we can assume that our canvas can fit around 800/30 cells.*/
		var cells_wide = 800/cellWidth;
		var cells_high = 600/cellHeight;
		//half are our centers positions for 2d
		var xCenter = cells_wide/2 * cellWidth;
		var yCenter = cells_high/2 * cellWidth;
		
		var centerCellNumberX = cells_wide/2;
		var centerCellNumberY = cells_high/2;
		
		
		var context = $("#gamescreen")[0].getContext('2d');

		//to draw a square in the center of the canvas, we just draw the points.
		context.beginPath();
        context.strokeStyle = "gray";
        context.moveTo(xCenter,yCenter); //move to top left corner
        context.lineTo(xCenter+cellWidth, yCenter); //move to top right corner
        context.lineTo(xCenter+cellWidth, yCenter+cellHeight); //move to bottom right corner
        context.lineTo(xCenter, yCenter+cellHeight); //move to bottom left corner
        context.lineTo(xCenter, yCenter); //move back to top left corner
		context.stroke(); //draw and yay - we've got a little gray square in the center of our canvas
		context.closePath();
		
		//now, give this an isometric perspective is pretty easy, we essentially tilt the square.
		//a sort of simplified way to do this is as follows - 
		//It means that we essentially draw a diamond instead of a square, and then halve the height
		//and double the width.
		//the first point, (the top of the diamond) is 1/2 the width of the square from where the top left
		//corner of a normal square would be, to the right
		//to Draw: first clear our other rect
		context.clearRect(0, 0, 800, 600);
		context.beginPath();
		context.moveTo(xCenter+cellWidth/2,yCenter); //top of diamond
		context.lineTo(xCenter+cellWidth+(cellWidth/2), yCenter+cellHeight/2); //right of diamond
		context.lineTo(xCenter+cellWidth/2, yCenter+cellHeight); //bottom of diamond
		context.lineTo(xCenter-cellWidth/2, yCenter+cellHeight/2); //left of diamond
		context.lineTo(xCenter+cellWidth/2,yCenter); //back to top of diamond
		context.stroke(); //boom, we have an isotile and isopositioning based on some 2s cell-grid coord 
		context.closePath();
		
		//if you were to start considering the center cells as 0,0 
		context.clearRect(0, 0, 800, 600);
		context.beginPath();
		draw(context,0,0,true);
		
	});
</script>
</head>
<body>
    <canvas id="gamescreen" width="800" height="600" style="border-style: dotted; float: left;">
		
    </canvas>
</body>
</html>